<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{Menu}"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="/css/Banhangtaiquay.css">
    <title>Giao Diện Bán Hàng Tại Quầy</title>
</head>
<body>
<main layout:fragment="main1">
    <div class="container">
        <div class="header">
            <div id="invoices-container">
                <!-- Hóa đơn sẽ được tạo ở đây -->
            </div>
            <button class="create-invoice-btn" id="create-invoice-btn">Tạo hóa đơn</button>

        </div>

        <div class="cart-message">
            <h2>Danh sách sản phẩm</h2>
            <ul id="invoice-list">
                <!-- Các sản phẩm đã chọn sẽ được hiển thị ở đây -->
            </ul>
        </div>

        <div class="actions">
            <button class="add-product-btn">Thêm sản phẩm</button>
        </div>

        <!-- Modal để chọn sản phẩm (ban đầu ẩn) -->
        <div id="product-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Chọn sản phẩm</h2>
                <ul id="product-list">
                    <!-- Ví dụ các sản phẩm -->
                    <li data-product-id="1" class="product-item">Sản phẩm A</li>
                    <li data-product-id="2" class="product-item">Sản phẩm B</li>
                    <li data-product-id="3" class="product-item">Sản phẩm C</li>
                </ul>
            </div>
        </div>


        <div>
            <input type="text" id="search-customer" placeholder="Tìm kiếm khách hàng...">
            <button id="select-customer-btn">Chọn</button>
            <button id="add-new-customer-btn" class="btn btn-primary">Thêm mới khách hàng</button>
        </div>

        <!-- Form thêm mới khách hàng (ban đầu ẩn) -->
        <div id="new-customer-form" style="display: none; margin-top: 20px;">
            <div class="row">
                <!-- Cột bên trái -->
                <div class="col-md-4 text-center">
                    <div class="image-upload">
                        <label for="file-input">
                            <img src="https://via.placeholder.com/1080" alt="placeholder image" id="image-preview">
                        </label>
                        <input id="file-input" type="file" accept="image/*" onchange="loadImage(event)">
                    </div>
                    <small style="left: 50px">Thêm hình ảnh khách hàng</small>
                </div>

                <!-- Cột bên phải -->
                <div class="col-md-8">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="hoTen" class="form-label">Họ và tên</label>
                            <input type="text" class="form-control" id="hoTen" placeholder="Nhập họ và tên">
                        </div>
                        <div class="col-md-6">
                            <label for="ngaySinh" class="form-label">Ngày sinh</label>
                            <input type="date" class="form-control" id="ngaySinh">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="email" class="form-label">E-mail</label>
                            <input type="email" class="form-control" id="email" placeholder="Nhập email">
                        </div>
                        <div class="col-md-6">
                            <label for="gioiTinh" class="form-label">Giới tính</label>
                            <select class="form-select" id="gioiTinh">
                                <option value="Nam">Nam</option>
                                <option value="Nữ">Nữ</option>
                                <option value="Khác">Khác</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="soDienThoai" class="form-label">Số điện thoại</label>
                        <input type="text" class="form-control" id="soDienThoai" placeholder="Nhập số điện thoại">
                    </div>

                    <div class="css_select_div">
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="tinh" class="form-label">Tỉnh</label>
                                <select class="form-select" id="tinh" name="tinh" title="Chọn Tỉnh Thành">
                                    <option value="0" hidden>Tỉnh Thành</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="quan" class="form-label">Huyện</label>
                                <select class="form-select" id="quan" name="quan" title="Chọn Quận Huyện">
                                    <option value="0" hidden>Quận Huyện</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label for="phuong" class="form-label">Phường</label>
                                <select class="form-select" id="phuong" name="phuong" title="Chọn Phường Xã">
                                    <option value="0" hidden>Phường Xã</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="soNha" class="form-label">Số nhà</label>
                        <input type="text" class="form-control" id="soNha" placeholder="Nhập số nhà và địa chỉ chi tiết">
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-save" viewBox="0 0 16 16">
                            <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1z"/>
                        </svg>
                        Lưu
                    </button>
                </div>
            </div>
        </div>




        <!-- Thông tin khách hàng sẽ được ẩn khi chưa chọn khách hàng -->
        <div id="customer-info" style="display: none;">
            <h3>Thông tin khách hàng</h3>
            <p>Tên khách hàng: <span id="customer-name">Nguyễn Anh Dũng</span></p>
            <p>Email: <span id="customer-email">DungNA29@gmail.com</span></p>
            <p>Số điện thoại: <span id="customer-phone">0387811111</span></p>
        </div>

        <div class="payment-section">
            <div class="payment-info">
                <h2>Thông tin thanh toán</h2>
                <p>Khách hàng thanh toán :</p>
                <label for="discount-code">Mã giảm giá:</label>
                <input type="text" id="discount-code" placeholder="VC/3348308 - HÀN SN116" />

                <div class="delivery">
                    <label for="delivery">Giao hàng:</label>
                    <input type="checkbox" id="delivery" />
                </div>

                <p>Tiền hàng: <span id="item-total">6.500.000 VNĐ</span></p>
                <p>Giảm giá: <span id="discount">300.000 VNĐ</span></p>
                <h3>Tổng tiền: <span id="total-amount">6.200.000 VNĐ</span></h3>

                <button class="btn btn-success">Thanh Toán</button>
            </div>

            <!-- Khu vực bên phải để hiển thị thông tin khách hàng -->
            <div class="customer-info-right" id="customer-info-right" style="display: none;">

                    <h3>Thông tin khách hàng</h3>

                    <div class="form-group">
                        <label for="customer-name">Tên khách hàng:</label>
                        <input type="text" class="form-control" id="customer-name1" name="customer-name" value="Nguyễn Anh Dũng" />
                    </div>

                    <div class="form-group">
                        <label for="customer-email">Email:</label>
                        <input type="email" class="form-control" id="customer-email1" name="customer-email" value="DungNA29@gmail.com" />
                    </div>

                    <div class="form-group">
                        <label for="customer-phone">Số điện thoại:</label>
                        <input type="tel" class="form-control" id="customer-phone1" name="customer-phone" value="0387811111" />
                    </div>

                    <div class="form-group">
                        <label for="customer-address">Địa chỉ giao hàng:</label>
                        <input type="text" class="form-control" id="customer-address" name="customer-address" value="123 Đường ABC, Quận XYZ" />
                    </div>
            <button class="btn btn-success">Chọn địa chỉ</button>


            </div>
        </div>
    </div>


        <script src="/js/Banhangtaiquay.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script>

            $(document).ready(function () {
                //Lấy tỉnh thành
                $.getJSON('https://esgoo.net/api-tinhthanh/1/0.htm', function (data_tinh) {
                    if (data_tinh.error == 0) {
                        $.each(data_tinh.data, function (key_tinh, val_tinh) {
                            $("#tinh").append('<option value="' + val_tinh.id + '">' + val_tinh.full_name + '</option>');
                        });
                        $("#tinh").change(function (e) {
                            var idtinh = $(this).val();
                            //Lấy quận huyện
                            $.getJSON('https://esgoo.net/api-tinhthanh/2/' + idtinh + '.htm', function (data_quan) {
                                if (data_quan.error == 0) {
                                    $("#quan").html('<option value="0">Quận Huyện</option>');
                                    $("#phuong").html('<option value="0">Phường Xã</option>');
                                    $.each(data_quan.data, function (key_quan, val_quan) {
                                        $("#quan").append('<option value="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                                    });
                                    //Lấy phường xã
                                    $("#quan").change(function (e) {
                                        var idquan = $(this).val();
                                        $.getJSON('https://esgoo.net/api-tinhthanh/3/' + idquan + '.htm', function (data_phuong) {
                                            if (data_phuong.error == 0) {
                                                $("#phuong").html('<option value="0">Phường Xã</option>');
                                                $.each(data_phuong.data, function (key_phuong, val_phuong) {
                                                    $("#phuong").append('<option value="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');

                                                });
                                            }
                                        });
                                    });

                                }
                            });
                        });

                    }
                });

            });
        </script>
</main>
</body>
</html>
