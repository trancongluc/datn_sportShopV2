<!--<!DOCTYPE html>-->
<!--<html lang="en"-->
<!--      xmlns:th="http://www.thymeleaf.org"-->
<!--      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
<!--      layout:decorate="~{Menu}">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Quản lý trả hàng</title>-->
<!--    <link rel="stylesheet" href="/css/DoiTraChiTiet.css">-->
<!--    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>-->
<!--</head>-->
<!--<body>-->
<!--<main layout:fragment="main1">-->
<!--    <div class="container">-->
<!--        <div class="header">-->
<!--            <img src="/images/img.png" width="20px" height="20px">-->
<!--            <h1>Quản lý trả hàng</h1>-->
<!--        </div>-->

<!--        &lt;!&ndash; Thông tin khách hàng &ndash;&gt;-->
<!--        <div class="section">-->
<!--            <h2><i class="fas fa-info-circle"></i> Thông tin khách hàng</h2>-->
<!--            <div class="customer-info">-->
<!--                <div>-->
<!--                    <p><span>Tên khách hàng:</span></p>-->
<!--                    <p><span>Số điện thoại:</span> 1234567890</p>-->
<!--                    <p><span>Địa chỉ:</span></p>-->
<!--                    <p><span>Ghi chú:</span></p>-->
<!--                </div>-->
<!--                <div>-->
<!--                    <p><span>Ngày giao hàng:</span></p>-->
<!--                    <p><span>Ngày nhận hàng:</span></p>-->
<!--                    <div class="status-buttons">-->
<!--                        <button class="success">Thành công</button>-->
<!--                        <button class="online">ONLINE</button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Thông tin đơn hàng &ndash;&gt;-->
<!--        <div class="section">-->
<!--            <h2>Thông tin đơn hàng</h2>-->
<!--            <table class="order-table">-->
<!--                <thead>-->
<!--                <tr>-->
<!--                    <th>STT</th>-->
<!--                    <th>Ảnh</th>-->
<!--                    <th>Thông tin sản phẩm</th>-->
<!--                    <th>Màu Sắc</th>-->
<!--                    <th>Số lượng</th>-->
<!--                    <th>Tổng tiền</th>-->
<!--                    <th>Trạng thái</th>-->
<!--                    <th>Hành động</th>-->
<!--                </tr>-->
<!--                </thead>-->
<!--                <tbody>-->
<!--                <tr>-->
<!--                    <td>1</td>-->
<!--                    <td><img-->
<!--                            src="https://storage.googleapis.com/a1aa/image/4TiPev4yK9V2J6xm3Hvl4ohnV85Z76QHL90wLZf6klVq3tnTA.jpg"-->
<!--                            alt="Product image with 10% discount label"/></td>-->
<!--                    <td>-->
<!--                        <p>KAPPA GIÀY SNEAKERS 123[ 36 - Maroon ]</p>-->
<!--                        <p style="color: red; font-weight: bold;">4.500.000 VND</p>-->
<!--                        <p style="text-decoration: line-through;">5.000.000 VND</p>-->
<!--                    </td>-->
<!--                    <td>-->
<!--                        <div style="background-color: maroon; width: 25px; height: 25px; border-radius: 50%;"></div>-->
<!--                    </td>-->
<!--                    <td>1</td>-->
<!--                    <td>4.500.000 VND</td>-->
<!--                    <td>-->
<!--                        <div class="status">Thành công</div>-->
<!--                    </td>-->
<!--                    <td class="action">-->
<!--                        <button><i class="fas fa-undo"></i></button>-->
<!--                    </td>-->
<!--                </tr>-->
<!--                </tbody>-->
<!--            </table>-->

<!--            &lt;!&ndash; Nút trả hàng tất cả &ndash;&gt;-->
<!--            <div class="return-all">-->
<!--                <button>Trả hàng tất cả</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div class="container2">-->
<!--        <table class="cart-table">-->
<!--            <thead>-->
<!--            <tr>-->
<!--                <th>-->
<!--                    STT-->
<!--                </th>-->
<!--                <th>-->
<!--                    Ảnh-->
<!--                </th>-->
<!--                <th>-->
<!--                    Tên sản phẩm-->
<!--                </th>-->
<!--                <th>-->
<!--                    Màu Sắc-->
<!--                </th>-->
<!--                <th>-->
<!--                    Số lượng-->
<!--                </th>-->
<!--                <th>-->
<!--                    Giá tiền-->
<!--                </th>-->
<!--                <th>-->
<!--                    Tổng tiền-->
<!--                </th>-->
<!--                <th>-->
<!--                    Hành động-->
<!--                </th>-->
<!--            </tr>-->
<!--            </thead>-->
<!--            <tbody>-->
<!--            <tr>-->
<!--                <td>-->
<!--                    1-->
<!--                </td>-->
<!--                <td>-->
<!--                    <img alt="Image of a black running shoe" height="50"-->
<!--                         src="https://storage.googleapis.com/a1aa/image/DenA334sR31LY6TnvMNYyEwUOfHsavICDmuAUFQQAmVgiunTA.jpg"-->
<!--                         width="50"/>-->
<!--                </td>-->
<!--                <td>-->
<!--                    Giày Chạy Nam Adidas Ultraboost Cc_1 Dna FZ2545[ 42 - black ]-->
<!--                </td>-->
<!--                <td>-->
<!--                    Black-->
<!--                </td>-->
<!--                <td>-->
<!--                    <input min="1" style="width: 50px;" type="number" value="1"/>-->
<!--                </td>-->
<!--                <td>-->
<!--                    2.500.000 VND-->
<!--                </td>-->
<!--                <td>-->
<!--                    2.500.000 VND-->
<!--                </td>-->
<!--                <td>-->
<!--                    <i class="fas fa-trash delete-btn">-->
<!--                    </i>-->
<!--                </td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->
<!--        <div class="summary">-->
<!--            <p>-->
<!--                Tổng giá hàng gốc:-->
<!--                <span>-->
<!--      9.500.000 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <p>-->
<!--                Voucher đã sử dụng:-->
<!--                <span>-->
<!--      150.000 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <p>-->
<!--                Tiền ship:-->
<!--                <span>-->
<!--      0 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <p>-->
<!--                Điểm sử dụng (0):-->
<!--                <span>-->
<!--      0 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <p class="total">-->
<!--                Tổng tiền thanh toán:-->
<!--                <span>-->
<!--      9.350.000 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <p>-->
<!--                Tổng giá hàng trả:-->
<!--                <span>-->
<!--      2.500.000 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <p>-->
<!--                Voucher mới:-->
<!--                <span>-->
<!--      150.000 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <hr/>-->
<!--            <p class="total">-->
<!--                Tổng tiền trả khách:-->
<!--                <span>-->
<!--      2.500.000 VND-->
<!--     </span>-->
<!--            </p>-->
<!--            <div class="return">-->
<!--                <p>-->
<!--                    * Mô tả:-->
<!--                </p>-->
<!--                <textarea placeholder="Nhập mô tả"></textarea>-->
<!--                <button>-->
<!--                    Trả hàng-->
<!--                </button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</main>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{Menu}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý trả hàng</title>
    <link rel="stylesheet" href="/css/DoiTraChiTiet.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <!--    <script src="/js/DoiTra.js"></script>-->
</head>
<body>
<main layout:fragment="main1">
    <div class="container">
        <div class="header">
            <img src="/images/img.png" width="20px" height="20px">
            <h1>Quản lý trả hàng</h1>
        </div>

        <!-- Thông tin khách hàng -->
        <div class="section">
            <h2><i class="fas fa-info-circle"></i> Thông tin khách hàng</h2>
            <div class="customer-info">
                <div>
                    <p><span>Tên khách hàng:</span> <span th:text="${hoaDon.user_name}"></span></p>
                    <p><span>Số điện thoại:</span> <span th:text="${hoaDon.phone_number}"></span></p>
                    <p><span>Địa chỉ:</span> <span th:text="${hoaDon.address}"></span></p>
                    <p><span>Ghi chú:</span> <span th:text="${hoaDon.note}"></span></p>
                </div>
                <div>
                    <p><span>Ngày giao hàng:</span> <span th:text="${hoaDon.ship_date}"></span></p>
                    <p><span>Ngày nhận hàng:</span> <span th:text="${hoaDon.desire_date}"></span></p>
                    <div class="status-buttons">
                        <button class="success"><span th:text="${hoaDon.status}"></span></button>
                        <button class="online"><span th:text="${hoaDon.type}"></span></button>
                    </div>
                </div>
            </div>
        </div>


        <div class="section">
            <h2>Thông tin đơn hàng</h2>
            <table class="order-table">
                <thead>
                <tr>
                    <th>STT</th>
                    <!--                    <th>Ảnh</th>-->
                    <th>Thông tin sản phẩm</th>
                    <th>Màu Sắc</th>
                    <th>Số lượng</th>
                    <th>Tổng tiền</th>
                    <th>Trạng thái</th>
                    <th>Hành động</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="item, iterStat : ${hoaDon.billDetails}">
                    <td th:text="${iterStat.index + 1}"></td>
                    <!--                    <td><img th:src="@{/images/${item.sanPhamChiTiet.anhSP}}" alt="Product Image"/></td>-->
                    <td>
                        <p th:text="${item.sanPhamChiTiet.sanPham.tenSanPham}"></p>
                        <p style="color: red; font-weight: bold;" th:text="${item.sanPhamChiTiet.gia} + ' VND'"></p>
                        <!--                        <p style="text-decoration: line-through;" th:text="${item.giaGoc} + ' VND'"></p>-->
                    </td>
                    <td>
                        <div th:style="'width: 25px; height: 25px; border-radius: 50%; background-color: ' + ${item.sanPhamChiTiet.mauSac.tenMauSac}"></div>
                    </td>
                    <td th:text="${item.sanPhamChiTiet.soLuong}"></td>
                    <td th:text="${item.sanPhamChiTiet.soLuong}*${item.sanPhamChiTiet.gia} + ' VND'"></td>
                    <td>
                        <div class="status" th:text="${item.sanPhamChiTiet.trangThai}"></div>
                    </td>
                    <td class="action">
                        <button th:data-product-name="${item.sanPhamChiTiet.sanPham.tenSanPham}"
                                onclick="openModal(this.dataset.productName)">
                            <i class="fas fa-undo"></i>
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>

            <!-- Nút trả hàng tất cả -->
            <div class="return-all">
                <button>Trả hàng tất cả</button>
            </div>
        </div>
    </div>
    <div class="container2">
        <table class="cart-table">
            <thead>
            <tr>
                <th>STT</th>
                <th>Ảnh</th>
                <th>Tên sản phẩm</th>
                <th>Màu Sắc</th>
                <th>Số lượng</th>
                <th>Giá tiền</th>
                <th>Tổng tiền</th>
                <th>Hành động</th>
            </tr>
            </thead>
            <tbody id="return-items">

            </tbody>
        </table>
        <!--        <div class="summary">-->
        <!--            <p>-->
        <!--                Tổng giá hàng gốc:-->
        <!--                <span th:text="${hoaDon.tongGiaGoc} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <p>-->
        <!--                Voucher đã sử dụng:-->
        <!--                <span th:text="${hoaDon.voucherDaSuDung} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <p>-->
        <!--                Tiền ship:-->
        <!--                <span th:text="${hoaDon.tienShip} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <p>-->
        <!--                Điểm sử dụng (0):-->
        <!--                <span th:text="${hoaDon.diemSuDung} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <p class="total">-->
        <!--                Tổng tiền thanh toán:-->
        <!--                <span th:text="${hoaDon.tongTienThanhToan} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <p>-->
        <!--                Tổng giá hàng trả:-->
        <!--                <span th:text="${hoaDon.tongGiaHangTra} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <p>-->
        <!--                Voucher mới:-->
        <!--                <span th:text="${hoaDon.voucherMoi} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <hr/>-->
        <!--            <p class="total">-->
        <!--                Tổng tiền trả khách:-->
        <!--                <span th:text="${hoaDon.tongTienTraKhach} + ' VND'"></span>-->
        <!--            </p>-->
        <!--            <div class="return">-->
        <!--                <p>* Mô tả:</p>-->
        <!--                <textarea placeholder="Nhập mô tả" th:placeholder="'Nhập mô tả'"></textarea>-->
        <!--                <button>Trả hàng</button>-->
        <!--            </div>-->
        <!--        </div>-->
    </div>


    <div id="myModal" style="display:none;">
        <div>
            <span onclick="closeModal()" style="cursor:pointer;">&times;</span>
            <h2>Thêm sản phẩm</h2>
            <label for="quantity">Số lượng:</label>
            <input type="number" id="quantity" min="1">
            <button onclick="addItem()">Thêm</button>
        </div>
    </div>
</main>

<script>
    let currentProduct = '';

    function openModal(productName) {
        console.log('Modal mở cho sản phẩm:', productName); // Thêm dòng này
        currentProduct = productName; // Lưu tên sản phẩm
        document.getElementById('myModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('myModal').style.display = 'none';
    }

    function addItem() {
        const quantity = document.getElementById('quantity').value;
        if (quantity) {
            const table = document.getElementById('return-items');
            const row = table.insertRow();
            row.innerHTML = `
                <td>${table.rows.length}</td>
                <td>${currentProduct}</td>
                <td>${quantity}</td>
                <td><!-- Giá tiền --></td>
                <td><!-- Tổng tiền --></td>
                <td><button onclick="removeItem(this)">Xóa</button></td>
            `;
            closeModal();
        } else {
            alert('Vui lòng nhập số lượng');
        }
    }

        function removeItem(button) {
            const row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }

        window.onclick = function(event) {
            const modal = document.getElementById('myModal');
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
</script>
</body>
</html>