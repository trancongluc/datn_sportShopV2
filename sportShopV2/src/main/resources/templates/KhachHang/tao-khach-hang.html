<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{Menu}"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Tạo Khách Hàng</title>
    <link rel="stylesheet" href="/css/khachHang.css">
    <script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>

<script src="/js/script.js"></script>
</head>
<body>



<main layout:fragment="main1">


    <script src="https://esgoo.net/scripts/jquery.js"></script>
    <style type="text/css">
        .css_select_div{ text-align: center;}
        .css_select{ display: inline-table; width: 25%; padding: 5px; margin: 5px 2%; border: solid 1px #686868; border-radius: 5px;}
    </style>
    <script src="/js/KhachHang.js"></script>

    <div class="container">
        <h2 class="mb-4">Tạo Khách Hàng</h2>
        <form  action="/add-khach-hang" method="post" enctype="multipart/form-data"> <!-- Cập nhật action -->
            <span>
                <a class="btn btn-success" href="/khach-hang/list">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-return-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5"/>
                    </svg>
                    Quay lại
                </a>
            </span>

            <button class="btn-scan-qr">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code-scan" viewBox="0 0 16 16">
                    <path d="M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"/>
                    <path d="M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"/>
                    <path d="M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"/>
                    <path d="M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"/>
                    <path d="M12 9h2V8h-2z"/>
                </svg>
                Scan QR Code
            </button>

            <div class="row">
                <!-- Cột bên trái -->
                <div class="col-md-4 text-center">
                    <div class="image-upload">
                        <label for="file-input">
                            <img src="https://via.placeholder.com/1080" alt="placeholder image" id="image-preview">
                        </label>
                        <input id="file-input" type="file"  accept="image/*" name="imageFile" onchange="loadImage(event)"> <!-- Thêm name -->

                    </div>

                </div>

                <!-- Cột bên phải -->
                <div class="col-md-8">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="hoTen" class="form-label">Họ và tên</label>
                            <input type="hoTen" class="form-control" id="hoTen" name="fullName" placeholder="Nhập họ và tên" required>
                        </div>
                        <div class="col-md-6">
                            <label for="ngaySinh" class="form-label">Ngày sinh</label>
                            <input type="date" class="form-control" id="ngaySinh" name="date" required>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="email" class="form-label">E-mail</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Nhập email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="gioiTinh" class="form-label">Giới tính</label>
                            <select class="form-select" id="gioiTinh" name="gender" required>
                                <option value="" hidden>Chọn giới tính</option>
                                <option value="Nam">Nam</option>
                                <option value="Nữ">Nữ</option>
                                <option value="Khác">Khác</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="soDienThoai" class="form-label">Số điện thoại</label>
                        <input type="text" class="form-control" id="soDienThoai" name="phoneNumber" placeholder="Nhập số điện thoại" required>
                    </div>

                    <div class="css_select_div">
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="tinh" class="form-label">Tỉnh</label>
                                <select class="form-select" id="tinh" name="tinh" onchange="document.getElementsByName('tinh_name')[0].value = this.options[this.selectedIndex].text;">
                                    <option value="0" hidden>Tỉnh Thành</option>
                                    <!-- Các lựa chọn tỉnh thành -->
                                </select>
                                <input type="hidden" name="tinh_name" value="">
                            </div>
                            <div class="col-md-4">
                                <label for="quan" class="form-label">Huyện</label>
                                <select class="form-select" id="quan" name="quan" onchange="document.getElementsByName('quan_name')[0].value = this.options[this.selectedIndex].text;">
                                    <option value="0" hidden>Quận Huyện</option>
                                </select>
                                <input type="hidden" name="quan_name" value="">
                            </div>
                            <div class="col-md-4">
                                <label for="phuong" class="form-label">Phường</label>
                                <select class="form-select" id="phuong" name="phuong" onchange="document.getElementsByName('phuong_name')[0].value = this.options[this.selectedIndex].text;">
                                    <option value="0" hidden>Phường Xã</option>
                                </select>
                                <input type="hidden" name="phuong_name" value="">
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="soNha" class="form-label">Số nhà</label>
                        <input type="soNha" class="form-control" id="soNha" name="line" placeholder="Nhập số nhà" required>
                    </div>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Thêm Khách Hàng</button>
        </form>
    </div>

    <script>
        function loadImage(event) {
            const image = document.getElementById('image-preview');
            image.src = URL.createObjectURL(event.target.files[0]);
            image.onload = function () {
                URL.revokeObjectURL(image.src) // free memory
            }
        }

    </script>

    <script src="/js/KhachHang.js"></script>
</main>
</body>
</html>